
graph TB
    %% ======================================================================================
    %%                           NEÃ˜ PROTOCOL MASTER ARCHITECTURE
    %% ======================================================================================
    
    subgraph NEOBOT["ðŸ§  NEOBOT CORE (The Brain)"]
        direction TB
        GATEWAY["ðŸš€ Gateway (WebSocket/HTTP)"]
        NEXUS["âš¡ PROTOCOL NEXUS (Event Bus)"]
        MIO["ðŸ†” MIO System (Identity Backend)"]
        ADAPTER["ðŸ›¡ï¸ Sovereign Adapter"]
        ANALYSIS["ðŸ‘ï¸ Sovereign Eye (Code Analysis)"]
        
        %% Core Wiring
        GATEWAY --> NEXUS
        NEXUS <--> MIO
        NEXUS <--> ADAPTER
        ADAPTER --> ANALYSIS
    end

    subgraph OPERATIONS["ðŸ’¼ FLOWOFF OPERATIONS (The Arms)"]
        direction TB
        FLOWCLOSER["ðŸ’¬ FlowCloser (CRM/Sales Agent)"]
        AGENT_FO["ðŸ¤– Agent FlowOFF (Traffic)"]
        LANDING_FO["ðŸŒ FlowOFF.xyz (Landing)"]
        PWA_FO["ðŸ“± FlowOFF PWA (Client App)"]
        
        %% Ops Flow
        LANDING_FO --> AGENT_FO
        AGENT_FO <--> FLOWCLOSER
        PWA_FO <--> FLOWCLOSER
    end

    subgraph FACTORY["ðŸ­ NEO SMART FACTORY (The Forge)"]
        direction TB
        SF_HUB["âš™ï¸ Factory Hub API"]
        SF_CORE["ðŸ“œ Smart Core (Contracts)"]
        SF_CLI["ðŸ’» NSF CLI (nsf)"]
        SF_UI["ðŸ–¥ï¸ Smart UI (Deployer)"]
        SF_MOBILE["ðŸ“± Smart UI Mobile"]
        
        %% Factory Flow
        SF_UI --> SF_HUB
        SF_CLI --> SF_HUB
        SF_HUB --> SF_CORE
        SF_MOBILE --> SF_HUB
    end

    subgraph FINANCE["ðŸ’° FLOWPAY SOVEREIGN (The Treasury)"]
        direction TB
        FP_GATE["ðŸ’¸ FlowPay Gateway (PIX/Crypto)"]
        FP_CORE["ðŸ§  FlowPay Core (Logic)"]
        FP_LIQ["ðŸ’§ Liquidity Pools (Dex)"]
        
        %% Finance Flow
        FP_GATE --> FP_CORE
        FP_CORE --> FP_LIQ
    end

    subgraph PRODUCTS["ðŸŽ® DApps & GOVERNANCE (The Soul)"]
        direction LR
        FLUXX["âš–ï¸ FluXX DAO (Governance)"]
        WOD["ðŸ‹ï¸ WOD[x] Pro (Move2Earn)"]
        NEO_LAND["ðŸŒ NeoProtocol.space"]
        
        %% Governance Flow
        FLUXX -.-> WOD
    end

    subgraph INFRA["â˜ï¸ SOVEREIGN INFRASTRUCTURE (The Ground)"]
        RAILWAY["ðŸš‚ Railway (Compute)"]
        BASE["ðŸ”µ Base Chain (L2 Settlement)"]
        IPFS["ðŸ“¦ IPFS (Decentralized Storage)"]
        LLM["ðŸ§  Anthropic (Intelligence)"]
        WA["ðŸ’¬ WhatsApp/Telegram (Channels)"]
    end

    %% ======================================================================================
    %%                                SYSTEM INTERCONNECTIONS (NEXUS ROUTING)
    %% ======================================================================================

    %% 1. ORCHESTRATION (The Nexus bundles it all)
    NEXUS == "Event: PAYMENT" ==> FP_GATE
    NEXUS == "Event: MINT" ==> SF_HUB
    NEXUS == "Event: NOTIFY" ==> FLOWCLOSER
    
    %% 2. INFRA CONNECTIONS
    GATEWAY -.-> WA
    GATEWAY -.-> RAILWAY
    ADAPTER -.-> LLM
    
    %% 3. BUSINESS LOGIC FLOWS
    FLOWCLOSER -- "Leads" --> FP_GATE
    FP_CORE -- "Settle" --> BASE
    SF_CORE -- "Deploy" --> BASE
    SF_HUB -- "Store Metadata" --> IPFS
    
    %% 4. PRODUCT INTEGRATIONS
    WOD -- "Rewards" --> FP_GATE
    FLUXX -- "Rules" --> SF_CORE

    %% ======================================================================================
    %%                                      STYLING
    %% ======================================================================================
    
    classDef core fill:#ff4444,stroke:#aa0000,stroke-width:4px,color:#fff
    classDef ops fill:#ff00ff,stroke:#aa00aa,stroke-width:2px,color:#fff
    classDef eng fill:#00ccff,stroke:#0088aa,stroke-width:2px,color:#000
    classDef fin fill:#00ffcc,stroke:#00aba9,stroke-width:2px,color:#000
    classDef prod fill:#ffcc00,stroke:#aa8800,stroke-width:2px,color:#000
    classDef infra fill:#222,stroke:#666,stroke-width:1px,color:#ddd #dashed
    
    class GATEWAY,NEXUS,MIO,ADAPTER,ANALYSIS core
    class FLOWCLOSER,AGENT_FO,LANDING_FO,PWA_FO ops
    class SF_HUB,SF_CORE,SF_CLI,SF_UI,SF_MOBILE eng
    class FP_GATE,FP_CORE,FP_LIQ fin
    class FLUXX,WOD,NEO_LAND prod
    class RAILWAY,BASE,IPFS,LLM,WA infra
