{"code":"var __defProp=Object.defineProperty;var __name=(target,value)=>__defProp(target,\"name\",{value,configurable:true});import fs from\"node:fs\";import os from\"node:os\";import path from\"node:path\";import{isTruthyEnvValue}from\"./env.js\";import{resolveBrewPathDirs}from\"./brew.js\";function isExecutable(filePath){try{fs.accessSync(filePath,fs.constants.X_OK);return true}catch{return false}}__name(isExecutable,\"isExecutable\");function isDirectory(dirPath){try{return fs.statSync(dirPath).isDirectory()}catch{return false}}__name(isDirectory,\"isDirectory\");function mergePath(params){const partsExisting=params.existing.split(path.delimiter).map(part=>part.trim()).filter(Boolean);const partsPrepend=params.prepend.map(part=>part.trim()).filter(Boolean);const seen=new Set;const merged=[];for(const part of[...partsPrepend,...partsExisting]){if(!seen.has(part)){seen.add(part);merged.push(part)}}return merged.join(path.delimiter)}__name(mergePath,\"mergePath\");function candidateBinDirs(opts){const execPath=opts.execPath??process.execPath;const cwd=opts.cwd??process.cwd();const homeDir=opts.homeDir??os.homedir();const platform=opts.platform??process.platform;const candidates=[];try{const execDir=path.dirname(execPath);const siblingMoltbot=path.join(execDir,\"moltbot\");if(isExecutable(siblingMoltbot))candidates.push(execDir)}catch{}const localBinDir=path.join(cwd,\"node_modules\",\".bin\");if(isExecutable(path.join(localBinDir,\"moltbot\")))candidates.push(localBinDir);const miseDataDir=process.env.MISE_DATA_DIR??path.join(homeDir,\".local\",\"share\",\"mise\");const miseShims=path.join(miseDataDir,\"shims\");if(isDirectory(miseShims))candidates.push(miseShims);candidates.push(...resolveBrewPathDirs({homeDir}));if(platform===\"darwin\"){candidates.push(path.join(homeDir,\"Library\",\"pnpm\"))}if(process.env.XDG_BIN_HOME)candidates.push(process.env.XDG_BIN_HOME);candidates.push(path.join(homeDir,\".local\",\"bin\"));candidates.push(path.join(homeDir,\".local\",\"share\",\"pnpm\"));candidates.push(path.join(homeDir,\".bun\",\"bin\"));candidates.push(path.join(homeDir,\".yarn\",\"bin\"));candidates.push(\"/opt/homebrew/bin\",\"/usr/local/bin\",\"/usr/bin\",\"/bin\");return candidates.filter(isDirectory)}__name(candidateBinDirs,\"candidateBinDirs\");function ensureMoltbotCliOnPath(opts={}){if(isTruthyEnvValue(process.env.CLAWDBOT_PATH_BOOTSTRAPPED))return;process.env.CLAWDBOT_PATH_BOOTSTRAPPED=\"1\";const existing=opts.pathEnv??process.env.PATH??\"\";const prepend=candidateBinDirs(opts);if(prepend.length===0)return;const merged=mergePath({existing,prepend});if(merged)process.env.PATH=merged}__name(ensureMoltbotCliOnPath,\"ensureMoltbotCliOnPath\");export{ensureMoltbotCliOnPath};\n","warnings":[],"map":{"version":3,"mappings":"kHAAA,OAAO,OAAQ,UACf,OAAO,OAAQ,UACf,OAAO,SAAU,YACjB,OAAS,qBAAwB,WAEjC,OAAS,wBAA2B,YAUpC,SAAS,aAAa,SAA2B,CAC/C,GAAI,CACF,GAAG,WAAW,SAAU,GAAG,UAAU,IAAI,EACzC,MAAO,KACT,MAAQ,CACN,MAAO,MACT,CACF,CAPS,oCAST,SAAS,YAAY,QAA0B,CAC7C,GAAI,CACF,OAAO,GAAG,SAAS,OAAO,EAAE,YAAY,CAC1C,MAAQ,CACN,MAAO,MACT,CACF,CANS,kCAQT,SAAS,UAAU,OAAyD,CAC1E,MAAM,cAAgB,OAAO,SAC1B,MAAM,KAAK,SAAS,EACpB,IAAK,MAAS,KAAK,KAAK,CAAC,EACzB,OAAO,OAAO,EACjB,MAAM,aAAe,OAAO,QAAQ,IAAK,MAAS,KAAK,KAAK,CAAC,EAAE,OAAO,OAAO,EAE7E,MAAM,KAAO,IAAI,IACjB,MAAM,OAAmB,CAAC,EAC1B,UAAW,OAAQ,CAAC,GAAG,aAAc,GAAG,aAAa,EAAG,CACtD,GAAI,CAAC,KAAK,IAAI,IAAI,EAAG,CACnB,KAAK,IAAI,IAAI,EACb,OAAO,KAAK,IAAI,CAClB,CACF,CACA,OAAO,OAAO,KAAK,KAAK,SAAS,CACnC,CAhBS,8BAkBT,SAAS,iBAAiB,KAAuC,CAC/D,MAAM,SAAW,KAAK,UAAY,QAAQ,SAC1C,MAAM,IAAM,KAAK,KAAO,QAAQ,IAAI,EACpC,MAAM,QAAU,KAAK,SAAW,GAAG,QAAQ,EAC3C,MAAM,SAAW,KAAK,UAAY,QAAQ,SAE1C,MAAM,WAAuB,CAAC,EAG9B,GAAI,CACF,MAAM,QAAU,KAAK,QAAQ,QAAQ,EACrC,MAAM,eAAiB,KAAK,KAAK,QAAS,SAAS,EACnD,GAAI,aAAa,cAAc,EAAG,WAAW,KAAK,OAAO,CAC3D,MAAQ,CAER,CAIA,MAAM,YAAc,KAAK,KAAK,IAAK,eAAgB,MAAM,EACzD,GAAI,aAAa,KAAK,KAAK,YAAa,SAAS,CAAC,EAAG,WAAW,KAAK,WAAW,EAEhF,MAAM,YAAc,QAAQ,IAAI,eAAiB,KAAK,KAAK,QAAS,SAAU,QAAS,MAAM,EAC7F,MAAM,UAAY,KAAK,KAAK,YAAa,OAAO,EAChD,GAAI,YAAY,SAAS,EAAG,WAAW,KAAK,SAAS,EAErD,WAAW,KAAK,GAAG,oBAAoB,CAAE,OAAQ,CAAC,CAAC,EAGnD,GAAI,WAAa,SAAU,CACzB,WAAW,KAAK,KAAK,KAAK,QAAS,UAAW,MAAM,CAAC,CACvD,CACA,GAAI,QAAQ,IAAI,aAAc,WAAW,KAAK,QAAQ,IAAI,YAAY,EACtE,WAAW,KAAK,KAAK,KAAK,QAAS,SAAU,KAAK,CAAC,EACnD,WAAW,KAAK,KAAK,KAAK,QAAS,SAAU,QAAS,MAAM,CAAC,EAC7D,WAAW,KAAK,KAAK,KAAK,QAAS,OAAQ,KAAK,CAAC,EACjD,WAAW,KAAK,KAAK,KAAK,QAAS,QAAS,KAAK,CAAC,EAClD,WAAW,KAAK,oBAAqB,iBAAkB,WAAY,MAAM,EAEzE,OAAO,WAAW,OAAO,WAAW,CACtC,CAxCS,4CA8CF,SAAS,uBAAuB,KAA8B,CAAC,EAAG,CACvE,GAAI,iBAAiB,QAAQ,IAAI,0BAA0B,EAAG,OAC9D,QAAQ,IAAI,2BAA6B,IAEzC,MAAM,SAAW,KAAK,SAAW,QAAQ,IAAI,MAAQ,GACrD,MAAM,QAAU,iBAAiB,IAAI,EACrC,GAAI,QAAQ,SAAW,EAAG,OAE1B,MAAM,OAAS,UAAU,CAAE,SAAU,OAAQ,CAAC,EAC9C,GAAI,OAAQ,QAAQ,IAAI,KAAO,MACjC,CAVgB","names":[],"ignoreList":[],"sources":["/Users/nettomello/CODIGOS/neobot/src/infra/path-env.ts"],"sourcesContent":[null]}}