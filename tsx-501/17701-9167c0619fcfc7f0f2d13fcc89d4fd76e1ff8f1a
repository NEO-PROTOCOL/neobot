{"code":"var __defProp=Object.defineProperty;var __name=(target,value)=>__defProp(target,\"name\",{value,configurable:true});import{healthCommand}from\"../../commands/health.js\";import{sessionsCommand}from\"../../commands/sessions.js\";import{statusCommand}from\"../../commands/status.js\";import{setVerbose}from\"../../globals.js\";import{defaultRuntime}from\"../../runtime.js\";import{formatDocsLink}from\"../../terminal/links.js\";import{theme}from\"../../terminal/theme.js\";import{runCommandWithRuntime}from\"../cli-utils.js\";import{formatHelpExamples}from\"../help-format.js\";import{parsePositiveIntOrUndefined}from\"./helpers.js\";function resolveVerbose(opts){return Boolean(opts.verbose||opts.debug)}__name(resolveVerbose,\"resolveVerbose\");function parseTimeoutMs(timeout){const parsed=parsePositiveIntOrUndefined(timeout);if(timeout!==void 0&&parsed===void 0){defaultRuntime.error(\"--timeout must be a positive integer (milliseconds)\");defaultRuntime.exit(1);return null}return parsed}__name(parseTimeoutMs,\"parseTimeoutMs\");function registerStatusHealthSessionsCommands(program){program.command(\"status\").description(\"Show channel health and recent session recipients\").option(\"--json\",\"Output JSON instead of text\",false).option(\"--all\",\"Full diagnosis (read-only, pasteable)\",false).option(\"--usage\",\"Show model provider usage/quota snapshots\",false).option(\"--deep\",\"Probe channels (WhatsApp Web + Telegram + Discord + Slack + Signal)\",false).option(\"--timeout <ms>\",\"Probe timeout in milliseconds\",\"10000\").option(\"--verbose\",\"Verbose logging\",false).option(\"--debug\",\"Alias for --verbose\",false).addHelpText(\"after\",()=>`\n${theme.heading(\"Examples:\")}\n${formatHelpExamples([[\"moltbot status\",\"Show channel health + session summary.\"],[\"moltbot status --all\",\"Full diagnosis (read-only).\"],[\"moltbot status --json\",\"Machine-readable output.\"],[\"moltbot status --usage\",\"Show model provider usage/quota snapshots.\"],[\"moltbot status --deep\",\"Run channel probes (WA + Telegram + Discord + Slack + Signal).\"],[\"moltbot status --deep --timeout 5000\",\"Tighten probe timeout.\"]])}`).addHelpText(\"after\",()=>`\n${theme.muted(\"Docs:\")} ${formatDocsLink(\"/cli/status\",\"docs.molt.bot/cli/status\")}\n`).action(async opts=>{const verbose=resolveVerbose(opts);setVerbose(verbose);const timeout=parseTimeoutMs(opts.timeout);if(timeout===null){return}await runCommandWithRuntime(defaultRuntime,async()=>{await statusCommand({json:Boolean(opts.json),all:Boolean(opts.all),deep:Boolean(opts.deep),usage:Boolean(opts.usage),timeoutMs:timeout,verbose},defaultRuntime)})});program.command(\"health\").description(\"Fetch health from the running gateway\").option(\"--json\",\"Output JSON instead of text\",false).option(\"--timeout <ms>\",\"Connection timeout in milliseconds\",\"10000\").option(\"--verbose\",\"Verbose logging\",false).option(\"--debug\",\"Alias for --verbose\",false).addHelpText(\"after\",()=>`\n${theme.muted(\"Docs:\")} ${formatDocsLink(\"/cli/health\",\"docs.molt.bot/cli/health\")}\n`).action(async opts=>{const verbose=resolveVerbose(opts);setVerbose(verbose);const timeout=parseTimeoutMs(opts.timeout);if(timeout===null){return}await runCommandWithRuntime(defaultRuntime,async()=>{await healthCommand({json:Boolean(opts.json),timeoutMs:timeout,verbose},defaultRuntime)})});program.command(\"sessions\").description(\"List stored conversation sessions\").option(\"--json\",\"Output as JSON\",false).option(\"--verbose\",\"Verbose logging\",false).option(\"--store <path>\",\"Path to session store (default: resolved from config)\").option(\"--active <minutes>\",\"Only show sessions updated within the past N minutes\").addHelpText(\"after\",()=>`\n${theme.heading(\"Examples:\")}\n${formatHelpExamples([[\"moltbot sessions\",\"List all sessions.\"],[\"moltbot sessions --active 120\",\"Only last 2 hours.\"],[\"moltbot sessions --json\",\"Machine-readable output.\"],[\"moltbot sessions --store ./tmp/sessions.json\",\"Use a specific session store.\"]])}\n\n${theme.muted(\"Shows token usage per session when the agent reports it; set agents.defaults.contextTokens to see % of your model window.\")}`).addHelpText(\"after\",()=>`\n${theme.muted(\"Docs:\")} ${formatDocsLink(\"/cli/sessions\",\"docs.molt.bot/cli/sessions\")}\n`).action(async opts=>{setVerbose(Boolean(opts.verbose));await sessionsCommand({json:Boolean(opts.json),store:opts.store,active:opts.active},defaultRuntime)})}__name(registerStatusHealthSessionsCommands,\"registerStatusHealthSessionsCommands\");export{registerStatusHealthSessionsCommands};\n","warnings":[],"map":{"version":3,"mappings":"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","names":[],"ignoreList":[],"sources":["/Users/nettomello/CODIGOS/neobot/src/cli/program/register.status-health-sessions.ts"],"sourcesContent":[null]}}