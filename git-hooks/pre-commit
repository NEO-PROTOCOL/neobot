#!/bin/sh
ROOT=$(git rev-parse --show-toplevel 2>/dev/null)
[ -z "$ROOT" ] && exit 0

# 1. Check for secrets first (most important)
if [ -x "$ROOT/git-hooks/pre-commit-secrets" ]; then
    "$ROOT/git-hooks/pre-commit-secrets" || exit 1
fi

# 2. Format staged files
node "$ROOT/scripts/format-staged.js"
